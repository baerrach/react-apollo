{"version":3,"file":"react-apollo.umd.js","sources":["ApolloProvider.js","shallowEqual.js","parser.js","graphql.js","withApollo.js","server.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as React from 'react';\r\nimport * as PropTypes from 'prop-types';\r\nimport { Component } from 'react';\r\nvar invariant = require('invariant');\r\nvar ApolloProvider = (function (_super) {\r\n    __extends(ApolloProvider, _super);\r\n    function ApolloProvider(props, context) {\r\n        var _this = _super.call(this, props, context) || this;\r\n        invariant(props.client, 'ApolloClient was not passed a client instance. Make ' +\r\n            'sure you pass in your client via the \"client\" prop.');\r\n        if (!props.store) {\r\n            props.client.initStore();\r\n        }\r\n        return _this;\r\n    }\r\n    ApolloProvider.prototype.componentWillReceiveProps = function (nextProps) {\r\n        if (nextProps.client !== this.props.client && !nextProps.store) {\r\n            nextProps.client.initStore();\r\n        }\r\n    };\r\n    ApolloProvider.prototype.getChildContext = function () {\r\n        return {\r\n            store: this.props.store || this.context.store,\r\n            client: this.props.client,\r\n        };\r\n    };\r\n    ApolloProvider.prototype.render = function () {\r\n        return React.Children.only(this.props.children);\r\n    };\r\n    return ApolloProvider;\r\n}(Component));\r\nexport default ApolloProvider;\r\nApolloProvider.propTypes = {\r\n    store: PropTypes.shape({\r\n        subscribe: PropTypes.func.isRequired,\r\n        dispatch: PropTypes.func.isRequired,\r\n        getState: PropTypes.func.isRequired,\r\n    }),\r\n    client: PropTypes.object.isRequired,\r\n    children: PropTypes.element.isRequired,\r\n};\r\nApolloProvider.childContextTypes = {\r\n    store: PropTypes.object,\r\n    client: PropTypes.object.isRequired,\r\n};\r\nApolloProvider.contextTypes = {\r\n    store: PropTypes.object,\r\n};\r\n//# sourceMappingURL=ApolloProvider.js.map","export default function shallowEqual(objA, objB) {\r\n    if (!objA || !objB)\r\n        return true;\r\n    if (objA === objB)\r\n        return true;\r\n    var keysA = Object.keys(objA);\r\n    var keysB = Object.keys(objB);\r\n    if (keysA.length !== keysB.length)\r\n        return false;\r\n    var hasOwn = Object.prototype.hasOwnProperty;\r\n    for (var i = 0; i < keysA.length; i++) {\r\n        if (!hasOwn.call(objB, keysA[i]) || objA[keysA[i]] !== objB[keysA[i]]) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n//# sourceMappingURL=shallowEqual.js.map","var invariant = require('invariant');\r\nexport var DocumentType;\r\n(function (DocumentType) {\r\n    DocumentType[DocumentType[\"Query\"] = 0] = \"Query\";\r\n    DocumentType[DocumentType[\"Mutation\"] = 1] = \"Mutation\";\r\n    DocumentType[DocumentType[\"Subscription\"] = 2] = \"Subscription\";\r\n})(DocumentType || (DocumentType = {}));\r\nexport function parser(document) {\r\n    var variables, type, name;\r\n    invariant((!!document && !!document.kind), \"Argument of \" + document + \" passed to parser was not a valid GraphQL DocumentNode. You may need to use 'graphql-tag' or another method to convert your operation into a document\");\r\n    var fragments = document.definitions.filter(function (x) { return x.kind === 'FragmentDefinition'; });\r\n    var queries = document.definitions.filter(function (x) { return x.kind === 'OperationDefinition' && x.operation === 'query'; });\r\n    var mutations = document.definitions.filter(function (x) { return x.kind === 'OperationDefinition' && x.operation === 'mutation'; });\r\n    var subscriptions = document.definitions.filter(function (x) { return x.kind === 'OperationDefinition' && x.operation === 'subscription'; });\r\n    invariant(!fragments.length || (queries.length || mutations.length || subscriptions.length), \"Passing only a fragment to 'graphql' is not yet supported. You must include a query, subscription or mutation as well\");\r\n    invariant(((queries.length + mutations.length + subscriptions.length) <= 1), \"react-apollo only supports a query, subscription, or a mutation per HOC. \" + document + \" had \" + queries.length + \" queries, \" + subscriptions.length + \" subscriptions and \" + mutations.length + \" mutations. You can use 'compose' to join multiple operation types to a component\");\r\n    type = queries.length ? DocumentType.Query : DocumentType.Mutation;\r\n    if (!queries.length && !mutations.length)\r\n        type = DocumentType.Subscription;\r\n    var definitions = queries.length ? queries :\r\n        (mutations.length ? mutations : subscriptions);\r\n    invariant(definitions.length === 1, \"react-apollo only supports one defintion per HOC. \" + document + \" had \" + definitions.length + \" definitions. You can use 'compose' to join multiple operation types to a component\");\r\n    var definition = definitions[0];\r\n    variables = definition.variableDefinitions || [];\r\n    var hasName = definition.name && definition.name.kind === 'Name';\r\n    name = hasName ? definition.name.value : 'data';\r\n    return { name: name, type: type, variables: variables };\r\n}\r\n//# sourceMappingURL=parser.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nimport { Component, createElement, } from 'react';\r\nimport * as PropTypes from 'prop-types';\r\nvar pick = require('lodash.pick');\r\nimport shallowEqual from './shallowEqual';\r\nvar invariant = require('invariant');\r\nvar assign = require('object-assign');\r\nvar hoistNonReactStatics = require('hoist-non-react-statics');\r\nimport { parser, DocumentType } from './parser';\r\nvar defaultMapPropsToOptions = function (props) { return ({}); };\r\nvar defaultMapResultToProps = function (props) { return props; };\r\nvar defaultMapPropsToSkip = function (props) { return false; };\r\nfunction observableQueryFields(observable) {\r\n    var fields = pick(observable, 'variables', 'refetch', 'fetchMore', 'updateQuery', 'startPolling', 'stopPolling', 'subscribeToMore');\r\n    Object.keys(fields).forEach(function (key) {\r\n        if (typeof fields[key] === 'function') {\r\n            fields[key] = fields[key].bind(observable);\r\n        }\r\n    });\r\n    return fields;\r\n}\r\nfunction getDisplayName(WrappedComponent) {\r\n    return WrappedComponent.displayName || WrappedComponent.name || 'Component';\r\n}\r\nvar nextVersion = 0;\r\nexport default function graphql(document, operationOptions) {\r\n    if (operationOptions === void 0) { operationOptions = {}; }\r\n    var _a = operationOptions.options, options = _a === void 0 ? defaultMapPropsToOptions : _a, _b = operationOptions.skip, skip = _b === void 0 ? defaultMapPropsToSkip : _b, _c = operationOptions.alias, alias = _c === void 0 ? 'Apollo' : _c;\r\n    var mapPropsToOptions = options;\r\n    if (typeof mapPropsToOptions !== 'function')\r\n        mapPropsToOptions = function () { return options; };\r\n    var mapPropsToSkip = skip;\r\n    if (typeof mapPropsToSkip !== 'function')\r\n        mapPropsToSkip = (function () { return skip; });\r\n    var mapResultToProps = operationOptions.props;\r\n    var operation = parser(document);\r\n    var version = nextVersion++;\r\n    function wrapWithApolloComponent(WrappedComponent) {\r\n        var graphQLDisplayName = alias + \"(\" + getDisplayName(WrappedComponent) + \")\";\r\n        var recycler = new ObservableQueryRecycler();\r\n        var GraphQL = (function (_super) {\r\n            __extends(GraphQL, _super);\r\n            function GraphQL(props, context) {\r\n                var _this = _super.call(this, props, context) || this;\r\n                _this.previousData = {};\r\n                _this.version = version;\r\n                _this.client = context.client;\r\n                invariant(!!_this.client, \"Could not find \\\"client\\\" in the context of \" +\r\n                    (\"\\\"\" + graphQLDisplayName + \"\\\". \") +\r\n                    \"Wrap the root component in an <ApolloProvider>\");\r\n                _this.store = _this.client.store;\r\n                _this.type = operation.type;\r\n                _this.dataForChildViaMutation = _this.dataForChildViaMutation.bind(_this);\r\n                return _this;\r\n            }\r\n            GraphQL.prototype.componentWillMount = function () {\r\n                if (!this.shouldSkip(this.props)) {\r\n                    this.setInitialProps();\r\n                }\r\n            };\r\n            GraphQL.prototype.componentDidMount = function () {\r\n                this.hasMounted = true;\r\n                if (this.type === DocumentType.Mutation)\r\n                    return;\r\n                if (!this.shouldSkip(this.props)) {\r\n                    this.subscribeToQuery();\r\n                }\r\n            };\r\n            GraphQL.prototype.componentWillReceiveProps = function (nextProps, nextContext) {\r\n                if (shallowEqual(this.props, nextProps) && this.client === nextContext.client) {\r\n                    return;\r\n                }\r\n                this.shouldRerender = true;\r\n                if (this.client !== nextContext.client) {\r\n                    this.client = nextContext.client;\r\n                    this.unsubscribeFromQuery();\r\n                    this.queryObservable = null;\r\n                    this.previousData = {};\r\n                    this.updateQuery(nextProps);\r\n                    if (!this.shouldSkip(nextProps)) {\r\n                        this.subscribeToQuery();\r\n                    }\r\n                    return;\r\n                }\r\n                if (this.type === DocumentType.Mutation) {\r\n                    return;\r\n                }\r\n                if (this.type === DocumentType.Subscription\r\n                    && operationOptions.shouldResubscribe\r\n                    && operationOptions.shouldResubscribe(this.props, nextProps)) {\r\n                    this.unsubscribeFromQuery();\r\n                    delete this.queryObservable;\r\n                    this.updateQuery(nextProps);\r\n                    this.subscribeToQuery();\r\n                    return;\r\n                }\r\n                if (this.shouldSkip(nextProps)) {\r\n                    if (!this.shouldSkip(this.props)) {\r\n                        this.unsubscribeFromQuery();\r\n                    }\r\n                    return;\r\n                }\r\n                this.updateQuery(nextProps);\r\n                this.subscribeToQuery();\r\n            };\r\n            GraphQL.prototype.componentWillUnmount = function () {\r\n                if (this.type === DocumentType.Query) {\r\n                    if (this.queryObservable) {\r\n                        recycler.recycle(this.queryObservable);\r\n                        delete this.queryObservable;\r\n                    }\r\n                    this.unsubscribeFromQuery();\r\n                }\r\n                if (this.type === DocumentType.Subscription)\r\n                    this.unsubscribeFromQuery();\r\n                this.hasMounted = false;\r\n            };\r\n            GraphQL.prototype.calculateOptions = function (props, newOpts) {\r\n                if (props === void 0) { props = this.props; }\r\n                var opts = mapPropsToOptions(props);\r\n                if (newOpts && newOpts.variables) {\r\n                    newOpts.variables = assign({}, opts.variables, newOpts.variables);\r\n                }\r\n                if (newOpts)\r\n                    opts = assign({}, opts, newOpts);\r\n                if (opts.variables || !operation.variables.length)\r\n                    return opts;\r\n                var variables = {};\r\n                for (var _i = 0, _a = operation.variables; _i < _a.length; _i++) {\r\n                    var _b = _a[_i], variable = _b.variable, type = _b.type;\r\n                    if (!variable.name || !variable.name.value)\r\n                        continue;\r\n                    if (typeof props[variable.name.value] !== 'undefined') {\r\n                        variables[variable.name.value] = props[variable.name.value];\r\n                        continue;\r\n                    }\r\n                    if (type.kind !== 'NonNullType') {\r\n                        variables[variable.name.value] = null;\r\n                        continue;\r\n                    }\r\n                    invariant(typeof props[variable.name.value] !== 'undefined', \"The operation '\" + operation.name + \"' wrapping '\" + getDisplayName(WrappedComponent) + \"' \" +\r\n                        (\"is expecting a variable: '\" + variable.name.value + \"' but it was not found in the props \") +\r\n                        (\"passed to '\" + graphQLDisplayName + \"'\"));\r\n                }\r\n                opts = __assign({}, opts, { variables: variables });\r\n                return opts;\r\n            };\r\n            GraphQL.prototype.calculateResultProps = function (result) {\r\n                var name = this.type === DocumentType.Mutation ? 'mutate' : 'data';\r\n                if (operationOptions.name)\r\n                    name = operationOptions.name;\r\n                var newResult = (_a = {}, _a[name] = result, _a.ownProps = this.props, _a);\r\n                if (mapResultToProps)\r\n                    return mapResultToProps(newResult);\r\n                return _b = {}, _b[name] = defaultMapResultToProps(result), _b;\r\n                var _a, _b;\r\n            };\r\n            GraphQL.prototype.setInitialProps = function () {\r\n                if (this.type === DocumentType.Mutation) {\r\n                    return;\r\n                }\r\n                var opts = this.calculateOptions(this.props);\r\n                this.createQuery(opts);\r\n            };\r\n            GraphQL.prototype.createQuery = function (opts) {\r\n                if (this.type === DocumentType.Subscription) {\r\n                    this.queryObservable = this.client.subscribe(assign({\r\n                        query: document,\r\n                    }, opts));\r\n                }\r\n                else {\r\n                    var queryObservable = recycler.reuse(opts);\r\n                    if (queryObservable === null) {\r\n                        this.queryObservable = this.client.watchQuery(assign({\r\n                            query: document,\r\n                            metadata: {\r\n                                reactComponent: {\r\n                                    displayName: graphQLDisplayName,\r\n                                },\r\n                            },\r\n                        }, opts));\r\n                    }\r\n                    else {\r\n                        this.queryObservable = queryObservable;\r\n                    }\r\n                }\r\n            };\r\n            GraphQL.prototype.updateQuery = function (props) {\r\n                var opts = this.calculateOptions(props);\r\n                if (!this.queryObservable) {\r\n                    this.createQuery(opts);\r\n                }\r\n                if (this.queryObservable._setOptionsNoResult) {\r\n                    this.queryObservable._setOptionsNoResult(opts);\r\n                }\r\n                else {\r\n                    if (this.queryObservable.setOptions) {\r\n                        this.queryObservable.setOptions(opts)\r\n                            .catch(function (error) { return null; });\r\n                    }\r\n                }\r\n            };\r\n            GraphQL.prototype.fetchData = function () {\r\n                if (this.shouldSkip())\r\n                    return false;\r\n                if (operation.type === DocumentType.Mutation || operation.type === DocumentType.Subscription)\r\n                    return false;\r\n                var opts = this.calculateOptions();\r\n                if (opts.ssr === false)\r\n                    return false;\r\n                if (opts.fetchPolicy === 'network-only' || opts.fetchPolicy === 'cache-and-network') {\r\n                    opts.fetchPolicy = 'cache-first';\r\n                }\r\n                var observable = this.client.watchQuery(assign({ query: document }, opts));\r\n                var result = observable.currentResult();\r\n                if (result.loading) {\r\n                    return observable.result();\r\n                }\r\n                else {\r\n                    return false;\r\n                }\r\n            };\r\n            GraphQL.prototype.subscribeToQuery = function () {\r\n                var _this = this;\r\n                if (this.querySubscription) {\r\n                    return;\r\n                }\r\n                var next = function (results) {\r\n                    if (_this.type === DocumentType.Subscription) {\r\n                        _this.lastSubscriptionData = results;\r\n                        results = { data: results };\r\n                    }\r\n                    var clashingKeys = Object.keys(observableQueryFields(results.data));\r\n                    invariant(clashingKeys.length === 0, \"the result of the '\" + graphQLDisplayName + \"' operation contains keys that \" +\r\n                        \"conflict with the return object.\" +\r\n                        clashingKeys.map(function (k) { return \"'\" + k + \"'\"; }).join(', ') + \" not allowed.\");\r\n                    _this.forceRenderChildren();\r\n                };\r\n                var handleError = function (error) {\r\n                    if (error.hasOwnProperty('graphQLErrors'))\r\n                        return next({ error: error });\r\n                    throw error;\r\n                };\r\n                this.querySubscription = this.queryObservable.subscribe({ next: next, error: handleError });\r\n            };\r\n            GraphQL.prototype.unsubscribeFromQuery = function () {\r\n                if (this.querySubscription) {\r\n                    this.querySubscription.unsubscribe();\r\n                    delete this.querySubscription;\r\n                }\r\n            };\r\n            GraphQL.prototype.shouldSkip = function (props) {\r\n                if (props === void 0) { props = this.props; }\r\n                return mapPropsToSkip(props) ||\r\n                    mapPropsToOptions(props).skip;\r\n            };\r\n            GraphQL.prototype.forceRenderChildren = function () {\r\n                this.shouldRerender = true;\r\n                if (this.hasMounted)\r\n                    this.forceUpdate();\r\n            };\r\n            GraphQL.prototype.getWrappedInstance = function () {\r\n                invariant(operationOptions.withRef, \"To access the wrapped instance, you need to specify \" +\r\n                    \"{ withRef: true } in the options\");\r\n                return this.refs.wrappedInstance;\r\n            };\r\n            GraphQL.prototype.dataForChildViaMutation = function (mutationOpts) {\r\n                var opts = this.calculateOptions(this.props, mutationOpts);\r\n                if (typeof opts.variables === 'undefined')\r\n                    delete opts.variables;\r\n                opts.mutation = document;\r\n                return this.client.mutate(opts);\r\n            };\r\n            GraphQL.prototype.dataForChild = function () {\r\n                if (this.type === DocumentType.Mutation) {\r\n                    return this.dataForChildViaMutation;\r\n                }\r\n                var opts = this.calculateOptions(this.props);\r\n                var data = {};\r\n                assign(data, observableQueryFields(this.queryObservable));\r\n                if (this.type === DocumentType.Subscription) {\r\n                    assign(data, {\r\n                        loading: !this.lastSubscriptionData,\r\n                        variables: opts.variables,\r\n                    }, this.lastSubscriptionData);\r\n                }\r\n                else {\r\n                    var currentResult = this.queryObservable.currentResult();\r\n                    var loading = currentResult.loading, error_1 = currentResult.error, networkStatus = currentResult.networkStatus;\r\n                    assign(data, { loading: loading, networkStatus: networkStatus });\r\n                    var logErrorTimeoutId_1 = setTimeout(function () {\r\n                        if (error_1) {\r\n                            console.error('Unhandled (in react-apollo)', error_1.stack || error_1);\r\n                        }\r\n                    }, 10);\r\n                    Object.defineProperty(data, 'error', {\r\n                        configurable: true,\r\n                        enumerable: true,\r\n                        get: function () {\r\n                            clearTimeout(logErrorTimeoutId_1);\r\n                            return error_1;\r\n                        },\r\n                    });\r\n                    if (loading) {\r\n                        assign(data, this.previousData, currentResult.data);\r\n                    }\r\n                    else if (error_1) {\r\n                        assign(data, (this.queryObservable.getLastResult() || {}).data);\r\n                    }\r\n                    else {\r\n                        assign(data, currentResult.data);\r\n                        this.previousData = currentResult.data;\r\n                    }\r\n                }\r\n                return data;\r\n            };\r\n            GraphQL.prototype.render = function () {\r\n                if (this.shouldSkip()) {\r\n                    return createElement(WrappedComponent, this.props);\r\n                }\r\n                var _a = this, shouldRerender = _a.shouldRerender, renderedElement = _a.renderedElement, props = _a.props;\r\n                this.shouldRerender = false;\r\n                if (!shouldRerender && renderedElement && renderedElement.type === WrappedComponent) {\r\n                    return renderedElement;\r\n                }\r\n                var data = this.dataForChild();\r\n                var clientProps = this.calculateResultProps(data);\r\n                var mergedPropsAndData = assign({}, props, clientProps);\r\n                if (operationOptions.withRef)\r\n                    mergedPropsAndData.ref = 'wrappedInstance';\r\n                this.renderedElement = createElement(WrappedComponent, mergedPropsAndData);\r\n                return this.renderedElement;\r\n            };\r\n            return GraphQL;\r\n        }(Component));\r\n        GraphQL.displayName = graphQLDisplayName;\r\n        GraphQL.WrappedComponent = WrappedComponent;\r\n        GraphQL.contextTypes = {\r\n            client: PropTypes.object.isRequired,\r\n        };\r\n        return hoistNonReactStatics(GraphQL, WrappedComponent, {});\r\n    }\r\n    return wrapWithApolloComponent;\r\n}\r\nvar ObservableQueryRecycler = (function () {\r\n    function ObservableQueryRecycler() {\r\n        this.observableQueries = [];\r\n    }\r\n    ObservableQueryRecycler.prototype.recycle = function (observableQuery) {\r\n        observableQuery.setOptions({\r\n            fetchPolicy: 'standby',\r\n            pollInterval: 0,\r\n            fetchResults: false,\r\n        });\r\n        this.observableQueries.push({\r\n            observableQuery: observableQuery,\r\n            subscription: observableQuery.subscribe({}),\r\n        });\r\n    };\r\n    ObservableQueryRecycler.prototype.reuse = function (options) {\r\n        if (this.observableQueries.length <= 0) {\r\n            return null;\r\n        }\r\n        var _a = this.observableQueries.pop(), observableQuery = _a.observableQuery, subscription = _a.subscription;\r\n        subscription.unsubscribe();\r\n        observableQuery.setOptions(__assign({}, options, { pollInterval: options.pollInterval, fetchPolicy: options.fetchPolicy }));\r\n        return observableQuery;\r\n    };\r\n    return ObservableQueryRecycler;\r\n}());\r\n//# sourceMappingURL=graphql.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Component, createElement, } from 'react';\r\nimport * as PropTypes from 'prop-types';\r\nvar invariant = require('invariant');\r\nvar assign = require('object-assign');\r\nvar hoistNonReactStatics = require('hoist-non-react-statics');\r\nfunction getDisplayName(WrappedComponent) {\r\n    return WrappedComponent.displayName || WrappedComponent.name || 'Component';\r\n}\r\nexport function withApollo(WrappedComponent, operationOptions) {\r\n    if (operationOptions === void 0) { operationOptions = {}; }\r\n    var withDisplayName = \"withApollo(\" + getDisplayName(WrappedComponent) + \")\";\r\n    var WithApollo = (function (_super) {\r\n        __extends(WithApollo, _super);\r\n        function WithApollo(props, context) {\r\n            var _this = _super.call(this, props, context) || this;\r\n            _this.client = context.client;\r\n            invariant(!!_this.client, \"Could not find \\\"client\\\" in the context of \" +\r\n                (\"\\\"\" + withDisplayName + \"\\\". \") +\r\n                \"Wrap the root component in an <ApolloProvider>\");\r\n            return _this;\r\n        }\r\n        WithApollo.prototype.getWrappedInstance = function () {\r\n            invariant(operationOptions.withRef, \"To access the wrapped instance, you need to specify \" +\r\n                \"{ withRef: true } in the options\");\r\n            return this.refs.wrappedInstance;\r\n        };\r\n        WithApollo.prototype.render = function () {\r\n            var props = assign({}, this.props);\r\n            props.client = this.client;\r\n            if (operationOptions.withRef)\r\n                props.ref = 'wrappedInstance';\r\n            return createElement(WrappedComponent, props);\r\n        };\r\n        return WithApollo;\r\n    }(Component));\r\n    WithApollo.displayName = withDisplayName;\r\n    WithApollo.WrappedComponent = WrappedComponent;\r\n    WithApollo.contextTypes = { client: PropTypes.object.isRequired };\r\n    return hoistNonReactStatics(WithApollo, WrappedComponent, {});\r\n}\r\n//# sourceMappingURL=withApollo.js.map","import { Children } from 'react';\r\nimport * as ReactDOM from 'react-dom/server';\r\nvar assign = require('object-assign');\r\nexport function walkTree(element, context, visitor) {\r\n    var Component = element.type;\r\n    if (typeof Component === 'function') {\r\n        var props = assign({}, Component.defaultProps, element.props);\r\n        var childContext = context;\r\n        var child = void 0;\r\n        if (Component.prototype && Component.prototype.isReactComponent) {\r\n            var _component = Component;\r\n            var instance_1 = new _component(props, context);\r\n            instance_1.props = instance_1.props || props;\r\n            instance_1.context = instance_1.context || context;\r\n            instance_1.setState = function (newState) {\r\n                instance_1.state = assign({}, instance_1.state, newState);\r\n            };\r\n            if (instance_1.componentWillMount) {\r\n                instance_1.componentWillMount();\r\n            }\r\n            if (instance_1.getChildContext) {\r\n                childContext = assign({}, context, instance_1.getChildContext());\r\n            }\r\n            if (visitor(element, instance_1, context) === false) {\r\n                return;\r\n            }\r\n            child = instance_1.render();\r\n        }\r\n        else {\r\n            if (visitor(element, null, context) === false) {\r\n                return;\r\n            }\r\n            var _component = Component;\r\n            child = _component(props, context);\r\n        }\r\n        if (child) {\r\n            walkTree(child, childContext, visitor);\r\n        }\r\n    }\r\n    else {\r\n        if (visitor(element, null, context) === false) {\r\n            return;\r\n        }\r\n        if (element.props && element.props.children) {\r\n            Children.forEach(element.props.children, function (child) {\r\n                if (child) {\r\n                    walkTree(child, context, visitor);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\nfunction getQueriesFromTree(_a, fetchRoot) {\r\n    var rootElement = _a.rootElement, _b = _a.rootContext, rootContext = _b === void 0 ? {} : _b;\r\n    if (fetchRoot === void 0) { fetchRoot = true; }\r\n    var queries = [];\r\n    walkTree(rootElement, rootContext, function (element, instance, context) {\r\n        var skipRoot = !fetchRoot && (element === rootElement);\r\n        if (instance && typeof instance.fetchData === 'function' && !skipRoot) {\r\n            var query = instance.fetchData();\r\n            if (query) {\r\n                queries.push({ query: query, element: element, context: context });\r\n                return false;\r\n            }\r\n        }\r\n    });\r\n    return queries;\r\n}\r\nexport function getDataFromTree(rootElement, rootContext, fetchRoot) {\r\n    if (rootContext === void 0) { rootContext = {}; }\r\n    if (fetchRoot === void 0) { fetchRoot = true; }\r\n    var queries = getQueriesFromTree({ rootElement: rootElement, rootContext: rootContext }, fetchRoot);\r\n    if (!queries.length)\r\n        return Promise.resolve();\r\n    var errors = [];\r\n    var mappedQueries = queries.map(function (_a) {\r\n        var query = _a.query, element = _a.element, context = _a.context;\r\n        return (query\r\n            .then(function (_) { return getDataFromTree(element, context, false); })\r\n            .catch(function (e) { return errors.push(e); }));\r\n    });\r\n    return Promise.all(mappedQueries).then(function (_) {\r\n        if (errors.length > 0) {\r\n            var error = errors.length === 1\r\n                ? errors[0]\r\n                : new Error(errors.length + \" errors were thrown when executing your GraphQL queries.\");\r\n            error.queryErrors = errors;\r\n            throw error;\r\n        }\r\n    });\r\n}\r\nexport function renderToStringWithData(component) {\r\n    return getDataFromTree(component)\r\n        .then(function () { return ReactDOM.renderToString(component); });\r\n}\r\nexport function cleanupApolloState(apolloState) {\r\n    for (var queryId in apolloState.queries) {\r\n        var fieldsToNotShip = ['minimizedQuery', 'minimizedQueryString'];\r\n        for (var _i = 0, fieldsToNotShip_1 = fieldsToNotShip; _i < fieldsToNotShip_1.length; _i++) {\r\n            var field = fieldsToNotShip_1[_i];\r\n            delete apolloState.queries[queryId][field];\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=server.js.map"],"names":["this","React.Children","Component","PropTypes.shape","PropTypes.func","PropTypes.object","PropTypes.element","invariant","__extends","createElement","assign","hoistNonReactStatics","getDisplayName","element","Children","ReactDOM.renderToString"],"mappings":"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"}